"use strict";const inputElement=document.querySelector(".js-input"),buttonElement=document.querySelector(".js-button"),showContainer=document.querySelector(".js-show-container"),formElement=document.querySelector(".js-form"),favoriteContainer=document.querySelector(".js-favorite-container");let resultShows=[],favoriteShows=[];function searchSeries(){const t=inputElement.value.toUpperCase();fetch("http://api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{resultShows=t,paintShows()})}function paintShows(){let t="";for(const e of resultShows){const o=e.show.name.toUpperCase(),n=e.show.image,s=e.show.id;let i,r;i=isFavoriteShow(e)?"container__list--favorite":"",t+=`<li class="container__list js-container ${i}" id="${s}">`,r=null===n?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":""+n.original,t+=`<img class="container__list--image" src="${r}" alt="poster of series" />`,t+=`<h2>${o}</h2>`,t+="</li>"}showContainer.innerHTML=t,listenContainerElement()}function isFavoriteShow(t){return void 0!==favoriteShows.find((function(e){const o=e.show,n=t.show;return o.id===n.id}))}function listenContainerElement(){const t=document.querySelectorAll(".js-container");for(const e of t)e.addEventListener("click",handleShow)}function handleShow(t){const e=parseInt(t.currentTarget.id);if(void 0===favoriteShows.find((function(t){return t.show.id===e}))){const t=resultShows.find((function(t){return t.show.id===e}));favoriteShows.push(t)}else{const t=favoriteShows.findIndex((function(t){return t.show.id===e}));favoriteShows.splice(t,1)}paintShows(),paintfavorites()}function paintfavorites(){let t="";for(const e of favoriteShows){const o=e.show.name,n=e.show.image,s=e.show.id;let i;t+='<li class="favorites__list">',i=null===n?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":""+n.original,t+=`<img class="favorites__list--image" src="${i}" alt="poster of favorite series" />`,t+=`<h4 class="favorites__list--title">${o}</h4>`,t+="</li>",t+=`<div class="favorites__list--x js-x" id="${s}">x`,t+="</div>"}favoriteContainer.innerHTML=t,storeLocalStorage(),listenContainerElementX()}function handleForm(t){t.preventDefault()}function storeLocalStorage(){const t=JSON.stringify(favoriteShows);localStorage.setItem("favoriteShowsSaved",t)}function getLocalStorageShows(){const t=localStorage.getItem("favoriteShowsSaved");if(null!==t){const e=JSON.parse(t);favoriteShows=e,paintfavorites()}}buttonElement.addEventListener("click",searchSeries),formElement.addEventListener("submit",handleForm),getLocalStorageShows();const resetButton=document.querySelector(".js-reset-button");function resetAll(){localStorage.removeItem("favoriteShowsSaved"),favoriteShows=[],paintfavorites(),paintShows()}function handleX(t){const e=parseInt(t.currentTarget.id),o=favoriteShows.findIndex((function(t){return t.show.id===e}));-1!==o&&(favoriteShows.splice(o,1),paintfavorites(),paintShows())}function listenContainerElementX(){const t=document.querySelectorAll(".js-x");for(const e of t)e.addEventListener("click",handleX)}resetButton.addEventListener("click",resetAll);